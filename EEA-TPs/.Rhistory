dataset_filtrado %>%
select_if(is.numeric) %>%
correlate(use="complete.obs")  %>%
rplot(colours = c('#003366','#3399FF','#FF3300')) +
geom_point(size=5) +
labs(title = 'Correlograma de variables') +
theme(axis.text.x = element_text(angle = 45, hjust=1))
dataset_sin_NA <- dataset_filtrado %>%
select(-c(bedrooms)) %>%
na.omit()
dataset_sin_NA
dataset_sin_NA <- dataset_filtrado %>%
select(-c(bedrooms)) %>%
na.omit()
dataset_sin_NA
dataset_sin_NA %>%
select(price) %>%
summary()
6000000 - 6000
dataset_sin_NA %>%
ggplot(aes(x=price)) +
geom_histogram(fill="#69b3a2", color="#e9ecef", bins = 227, binwidth = 26429) +
#ggtitle("Histograma de precios") +
labs(title='Histograma de precios',
x = 'Precios (USD)',
y = 'Frecuencia') +
theme_minimal()
count(dataset_sin_NA, price) %>%
mutate(frec = n/nrow(dataset_sin_NA)*100) %>%
arrange(desc(frec)) %>%
mutate(frec_acum = cumsum(frec))
count(dataset_sin_NA, price) %>%
mutate(frec = n/nrow(dataset_sin_NA)*100) %>%
arrange(desc(frec)) %>%
mutate(frec_acum = cumsum(frec),
id = 1:nrow(.))
count(dataset_sin_NA, price) %>%
mutate(frec = n/nrow(dataset_sin_NA)*100) %>%
arrange(desc(frec)) %>%
mutate(frec_acum = cumsum(frec),
id = 1:nrow(.)) %>%
select(id, everything())
frec <- count(dataset_sin_NA, price) %>%
mutate(frec = n/nrow(dataset_sin_NA)*100) %>%
arrange(desc(frec)) %>%
mutate(frec_acum = cumsum(frec),
id = 1:nrow(.)) %>%
select(id, everything())
frec
frec[:70]
frec[0:70]
frec[0:70,]
frec[0:70,] %>%
select(price) %>%
summary()
frec[0:70,] %>%
select(price) %>%
arrange(desc())
frec[0:70,] %>%
select(price) %>%
arrange(desc(price))
frec[0:70,] %>%
select(price) %>%
arrange(desc(price)) %>%
summary()
frec[0:70,] %>%
select(price) %>%
arrange(desc(price))
dataset_sin_NA %>%
group_by(property_type) %>%
summarise(Q1 = quantile(x = price, probs = 0.25, names = FALSE),
Q3 = quantile(x = price, probs = 0.75, names = FALSE),
promedio = mean(price),
mín = min(price),
máx = max(price))
dataset_sin_NA %>%
group_by(property_type) %>%
summarise(Q1 = quantile(x = price, probs = 0.25, names = FALSE),
Q3 = quantile(x = price, probs = 0.75, names = FALSE),
promedio = mean(price),
mediana = median(price),
mín = min(price),
máx = max(price))
dataset_sin_NA %>%
group_by(property_type) %>%
summarise(mín = min(price),
Q1 = quantile(x = price, probs = 0.25, names = FALSE),
promedio = mean(price),
mediana = median(price),
Q3 = quantile(x = price, probs = 0.75, names = FALSE),
máx = max(price))
dataset_sin_NA %>%
group_by(property_type) %>%
summarise(mín = min(price),
Q1 = quantile(x = price, probs = 0.25, names = FALSE),
mediana = median(price),
promedio = mean(price),
Q3 = quantile(x = price, probs = 0.75, names = FALSE),
máx = max(price))
dataset_sin_NA %>%
group_by(property_type) %>%
summarise(mín = min(price),
Q1 = quantile(x = price, probs = 0.25, names = FALSE),
mediana = median(price),
media = mean(price),
Q3 = quantile(x = price, probs = 0.75, names = FALSE),
máx = max(price))
ggdata <- dataset_sin_NA %>%
mutate(id = as.factor(id),
l3 = as.factor(l3),
property_type = as.factor(property_type))
ggplot(ggdata, aes(x = property_type, y = price, group = property_type, fill = property_type)) +
geom_boxplot() +
labs(title='Precio por tipo de propiedad',
x = 'Tipos de propiedad',
y = 'Precio (USD)')
ggdata <- dataset_sin_NA %>%
select(property_type, price) %>%
mutate(property_type = as.factor(property_type))
ggplot(ggdata, aes(x = property_type, y = price, group = property_type, fill = property_type)) +
geom_boxplot() +
labs(title='Precio por tipo de propiedad',
x = 'Tipos de propiedad',
y = 'Precio (USD)')
dataset_sin_NA %>%
select_if(is.numeric) %>%
ggcorr(method = c("complete.obs","pearson"),
low = '#e0f3db',
mid = '#a8ddb5',
high = '#43a2ca',
label = TRUE,
label_color = "black",
nbreaks = 5,
hjust = 0.75,
legend.position = "left") +
labs(title = "Propiedades en venta en CABA - Correlograma")
frec[0:70,] %>%
select(price) %>%
arrange(desc(price)) %>%
mutat(n=(1,nrow(price)))
frec[0:70,] %>%
select(price) %>%
arrange(desc(price)) %>%
mutat(id=1:nrow(.))
frec[0:70,] %>%
select(price) %>%
arrange(desc(price)) %>%
mutate(id = 1:nrow(.))
sort(dataset_sin_NA$price, decreasing = FALSE) %>%
plot(main = "Scatterplot de precios",
ylab = "Precios",
col = "#43a2ca")
sort(dataset_sin_NA$price, decreasing = FALSE) %>%
plot(main = "Scatterplot de precios",
ylab = "Precios",
col = "#43a2ca") +
theme_minimal()
sort(dataset_sin_NA$price, decreasing = FALSE) %>%
plot(main = "Scatterplot de precios",
xlab = "Índice",
ylab = "Precios",
col = "#43a2ca") +
theme_minimal()
sort(dataset_sin_NA$price, decreasing = FALSE) %>%
plot(main = "Scatterplot de precios",
xlab = "Índice",
ylab = "Precios",
col = "#43a2ca")
dataset_sin_outliers1 <- dataset_sin_NA %>%
filter(price < 3000000)
dataset_sin_NA %>%
filter(price < 3000000) %>%
select(price) %>%
summary()
data.riq <- IQR(dataset_sin_NA$price)
data.riq
cuantiles<-quantile(dataset_sin_NA$price, c(0.25, 0.5, 0.75), type = 7)
cuantiles
outliers_min<-as.numeric(cuantiles[1])-1.5*data.riq
print(outliers_min)
outliers_max<-as.numeric(cuantiles[3])+1.5*data.riq
print(outliers_max)
dataset_sin_outliers2 <- dataset_sin_NA %>%
filter(price > outliers_min,
price < outliers_max)
dataset_sin_outliers2 %>%
summary(price)
cuantiles
data.riq <- IQR(dataset_sin_NA$price)
cuantiles<-quantile(dataset_sin_NA$price, c(0.25, 0.5, 0.75), type = 7)
outliers_min<-as.numeric(cuantiles[1])-1.5*data.riq
outliers_max<-as.numeric(cuantiles[3])+1.5*data.riq
dataset_sin_outliers <- dataset_sin_NA %>%
filter(price > outliers_min,
price < outliers_max)
dataset_sin_outliers %>%
summary(price)
dataset_sin_outliers %>%
select(price) %>%
summary()
dataset_sin_outliers
data.model1 <- dataset_sin_outliers %>%
select(price, rooms)
data.model1
data.model2
data.model2 <- dataset_sin_outliers %>%
select(price, surface_total)
data.model2
data.model1
mod1 <- lm(y ~ x, data = data.model1)
mod1 <- lm(price ~ rooms, data = data.model1)
coef(mod1)
summary(mod1)
summary(mod1)
mod2 <- lm(price ~ surface_total, data = data.model1)
mod2 <- lm(price ~ surface_total, data = data.model2)
summary(mod2)
data.model1 <- dataset_sin_outliers %>%
select(price, rooms)
mod1 <- lm(price ~ rooms, data = data.model1)
summary(mod1)
data.model2 <- dataset_sin_outliers %>%
select(price, surface_total)
mod2 <- lm(price ~ surface_total, data = data.model2)
summary(mod2)
dataset_sin_outliers %>%
select(price) %>%
summary()
coef(mod2)
summary(mod2)
dataset_sin_outliers %>%
select(price) %>%
summary()
dataset_sin_outliers %>%
ggplot(aes(x=price)) +
geom_histogram(fill="#69b3a2", color="#e9ecef",bins = 100) +
labs(title='Histograma de precios',
subtitle = 'Valores atípicos eliminados',
x = 'Precios (USD)',
y = 'Frecuencia') +
theme_minimal()
dataset_sin_outliers %>%
ggplot(aes(x=price)) +
geom_histogram(fill="#69b3a2", color="#e9ecef",bins = 80) +
labs(title='Histograma de precios',
subtitle = 'Valores atípicos eliminados',
x = 'Precios (USD)',
y = 'Frecuencia') +
theme_minimal()
dataset_sin_outliers %>%
ggplot(aes(x=price)) +
geom_histogram(fill="#69b3a2", color="#e9ecef",bins = 90) +
labs(title='Histograma de precios',
subtitle = 'Valores atípicos eliminados',
x = 'Precios (USD)',
y = 'Frecuencia') +
theme_minimal()
dataset_sin_outliers %>%
ggplot(aes(x=price)) +
geom_histogram(fill="#69b3a2", color="#e9ecef",bins = 100) +
labs(title='Histograma de precios',
subtitle = 'Valores atípicos eliminados',
x = 'Precios (USD)',
y = 'Frecuencia') +
theme_minimal()
dataset_sin_outliers %>%
ggplot(aes(x=price)) +
geom_histogram(fill="#69b3a2", color="#e9ecef",bins = 100) +
labs(title='Histograma de precios',
subtitle = 'Valores atípicos eliminados',
x = 'Precios (USD)',
y = 'Frecuencia') +
theme_minimal()
count(dataset_sin_outliers, price) %>%
mutate(frec = n/nrow(dataset_sin_outliers)*100) %>%
arrange(desc(frec)) %>%
mutate(frec_acum = cumsum(frec))
count(dataset_sin_outliers, price) %>%
mutate(frec = n/nrow(dataset_sin_outliers)*100) %>%
arrange(desc(frec)) %>%
mutate(frec_acum = cumsum(frec),
id = 1:nrow(.)) %>%
select(id, everything())
dim(frec)
frec
```{r}
dataset_sin_outliers %>%
group_by(property_type) %>%
summarise(Q1 = quantile(x = price, probs = 0.25, names = FALSE),
Q3 = quantile(x = price, probs = 0.75, names = FALSE),
promedio = mean(price),
mín = min(price),
máx = max(price))
ggdata_sin_out <- dataset_sin_outliers %>%
mutate(property_type = as.factor(property_type))
ggplot(ggdata_sin_out, aes(x = property_type, y = price, group = property_type, fill = property_type)) +
geom_boxplot() +
labs(title='Precio por tipo de propiedad',
subtitle = 'Valores atípicos eliminados',
x = 'Tipos de propiedad',
y = 'Precio (USD)')
dataset_sin_outliers %>%
group_by(property_type) %>%
summarise(mín = min(price),
Q1 = quantile(x = price, probs = 0.25, names = FALSE),
media = mean(price),
mediana = median(price)
Q3 = quantile(x = price, probs = 0.75, names = FALSE),
dataset_sin_outliers %>%
group_by(property_type) %>%
summarise(mín = min(price),
Q1 = quantile(x = price, probs = 0.25, names = FALSE),
media = mean(price),
mediana = median(price),
Q3 = quantile(x = price, probs = 0.75, names = FALSE),
máx = max(price))
dataset_sin_outliers %>%
group_by(property_type) %>%
summarise(mín = min(price),
Q1 = quantile(x = price, probs = 0.25, names = FALSE),
mediana = median(price),
media = mean(price),
Q3 = quantile(x = price, probs = 0.75, names = FALSE),
máx = max(price))
dataset_sin_outliers %>%
select_if(is.numeric) %>%
ggcorr(method = c("complete.obs","pearson"),
low = '#e0f3db',
mid = '#a8ddb5',
high = '#43a2ca',
label = TRUE,
label_color = "black",
nbreaks = 5,
hjust = 0.75,
legend.position = "left") +
labs(title = "Propiedades en venta en CABA - Correlograma",
subtitle = "Valores atípicos eliminados")
dataset_sin_outliers %>%
select_if(is.numeric) %>%
ggcorr(method = c("complete.obs","pearson"),
low = '#e0f3db',
mid = '#a8ddb5',
high = '#43a2ca',
label = TRUE,
label_color = "black",
nbreaks = 5,
hjust = 0.75,
legend.position = "left") +
labs(title = "Propiedades en venta en CABA - Correlograma",
subtitle = "Valores atípicos eliminados")
library(tidyverse)
library(data.table)
library(corrr)
library(ggplot2)
library(GGally)
library(hrbrthemes)
library(modelr)
dataset = fread("ar_properties.csv")
dataset
summary(dataset)
glimpse(dataset)
dataset_filtrado <- dataset %>%
filter(l1 == 'Argentina',
l2 == 'Capital Federal',
currency == 'USD',
property_type %in% c('Departamento','PH','Casa'),
operation_type == 'Venta') %>%
select(id, l3, rooms, bedrooms, bathrooms, surface_total, surface_covered, price, property_type)
dataset_filtrado
unique_values <- dataset_filtrado %>%
summarise_all(n_distinct)
unique_values
na_values <- dataset_filtrado %>%
is.na() %>%
colSums() %>%
t() %>%
as.data.frame()
na_values
dataset_filtrado %>%
select_if(is.numeric) %>%
correlate(use="complete.obs") %>%
shave() %>%
fashion()
dataset_filtrado %>%
select_if(is.numeric) %>%
correlate(use="complete.obs")  %>%
rplot(colours = c('#003366','#3399FF','#FF3300')) +
geom_point(size=5) +
labs(title = 'Correlograma de variables') +
theme(axis.text.x = element_text(angle = 45, hjust=1))
dataset_sin_NA <- dataset_filtrado %>%
select(-c(bedrooms)) %>%
na.omit()
dataset_sin_NA
dataset_sin_NA %>%
select(price) %>%
summary()
dataset_sin_NA %>%
ggplot(aes(x=price)) +
geom_histogram(fill="#69b3a2", color="#e9ecef", bins = 227, binwidth = 26429) +
#ggtitle("Histograma de precios") +
labs(title='Histograma de precios',
x = 'Precios (USD)',
y = 'Frecuencia') +
theme_minimal()
frec <- count(dataset_sin_NA, price) %>%
mutate(frec = n/nrow(dataset_sin_NA)*100) %>%
arrange(desc(frec)) %>%
mutate(frec_acum = cumsum(frec),
id = 1:nrow(.)) %>%
select(id, everything())
frec
dataset_sin_NA %>%
group_by(property_type) %>%
summarise(mín = min(price),
Q1 = quantile(x = price, probs = 0.25, names = FALSE),
mediana = median(price),
media = mean(price),
Q3 = quantile(x = price, probs = 0.75, names = FALSE),
máx = max(price))
ggdata <- dataset_sin_NA %>%
select(property_type, price) %>%
mutate(property_type = as.factor(property_type))
ggplot(ggdata, aes(x = property_type, y = price, group = property_type, fill = property_type)) +
geom_boxplot() +
labs(title='Precio por tipo de propiedad',
x = 'Tipos de propiedad',
y = 'Precio (USD)')
dataset_sin_NA %>%
select_if(is.numeric) %>%
ggcorr(method = c("complete.obs","pearson"),
low = '#e0f3db',
mid = '#a8ddb5',
high = '#43a2ca',
label = TRUE,
label_color = "black",
nbreaks = 5,
hjust = 0.75,
legend.position = "left") +
labs(title = "Propiedades en venta en CABA - Correlograma")
sort(dataset_sin_NA$price, decreasing = FALSE) %>%
plot(main = "Scatterplot de precios",
xlab = "Índice",
ylab = "Precios",
col = "#43a2ca")
dataset_sin_NA %>%
filter(price < 3000000) %>%
select(price) %>%
summary()
data.riq <- IQR(dataset_sin_NA$price)
cuantiles<-quantile(dataset_sin_NA$price, c(0.25, 0.5, 0.75), type = 7)
outliers_min<-as.numeric(cuantiles[1])-1.5*data.riq
outliers_max<-as.numeric(cuantiles[3])+1.5*data.riq
dataset_sin_outliers <- dataset_sin_NA %>%
filter(price > outliers_min,
price < outliers_max)
dataset_sin_outliers
dataset_sin_outliers %>%
select(price) %>%
summary()
dataset_sin_outliers %>%
ggplot(aes(x=price)) +
geom_histogram(fill="#69b3a2", color="#e9ecef",bins = 100) +
labs(title='Histograma de precios',
subtitle = 'Valores atípicos eliminados',
x = 'Precios (USD)',
y = 'Frecuencia') +
theme_minimal()
count(dataset_sin_outliers, price) %>%
mutate(frec = n/nrow(dataset_sin_outliers)*100) %>%
arrange(desc(frec)) %>%
mutate(frec_acum = cumsum(frec),
id = 1:nrow(.)) %>%
select(id, everything())
dataset_sin_outliers %>%
group_by(property_type) %>%
summarise(mín = min(price),
Q1 = quantile(x = price, probs = 0.25, names = FALSE),
mediana = median(price),
media = mean(price),
Q3 = quantile(x = price, probs = 0.75, names = FALSE),
máx = max(price))
ggdata_sin_out <- dataset_sin_outliers %>%
mutate(property_type = as.factor(property_type))
ggplot(ggdata_sin_out, aes(x = property_type, y = price, group = property_type, fill = property_type)) +
geom_boxplot() +
labs(title='Precio por tipo de propiedad',
subtitle = 'Valores atípicos eliminados',
x = 'Tipos de propiedad',
y = 'Precio (USD)')
dataset_sin_outliers %>%
select_if(is.numeric) %>%
ggcorr(method = c("complete.obs","pearson"),
low = '#e0f3db',
mid = '#a8ddb5',
high = '#43a2ca',
label = TRUE,
label_color = "black",
nbreaks = 5,
hjust = 0.75,
legend.position = "left") +
labs(title = "Propiedades en venta en CABA - Correlograma",
subtitle = "Valores atípicos eliminados")
data.model1 <- dataset_sin_outliers %>%
select(price, rooms)
mod1 <- lm(price ~ rooms, data = data.model1)
summary(mod1)
data.model2 <- dataset_sin_outliers %>%
select(price, surface_total)
mod2 <- lm(price ~ surface_total, data = data.model2)
coef(mod2)
summary(mod2)
