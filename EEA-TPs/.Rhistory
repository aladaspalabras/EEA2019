summary()
data.riq <- IQR(dataset_sin_NA$price)
cuantiles<-quantile(dataset_sin_NA$price, c(0.25, 0.5, 0.75), type = 7)
outliers_min<-as.numeric(cuantiles[1])-1.5*data.riq
outliers_max<-as.numeric(cuantiles[3])+1.5*data.riq
dataset_sin_outliers <- dataset_sin_NA %>%
filter(price > outliers_min,
price < outliers_max)
dataset_sin_outliers
dataset_sin_outliers %>%
select(price) %>%
summary()
dataset_sin_outliers %>%
ggplot(aes(x=price)) +
geom_histogram(fill="#69b3a2", color="#e9ecef",bins = 100) +
labs(title='Histograma de precios',
subtitle = 'Valores atípicos eliminados',
x = 'Precios (USD)',
y = 'Frecuencia') +
theme_minimal()
count(dataset_sin_outliers, price) %>%
mutate(frec = n/nrow(dataset_sin_outliers)*100) %>%
arrange(desc(frec)) %>%
mutate(frec_acum = cumsum(frec),
id = 1:nrow(.)) %>%
select(id, everything())
dataset_sin_outliers %>%
group_by(property_type) %>%
summarise(mín = min(price),
Q1 = quantile(x = price, probs = 0.25, names = FALSE),
mediana = median(price),
media = mean(price),
Q3 = quantile(x = price, probs = 0.75, names = FALSE),
máx = max(price))
ggdata_sin_out <- dataset_sin_outliers %>%
mutate(property_type = as.factor(property_type))
ggplot(ggdata_sin_out, aes(x = property_type, y = price, group = property_type, fill = property_type)) +
geom_boxplot() +
labs(title='Precio por tipo de propiedad',
subtitle = 'Valores atípicos eliminados',
x = 'Tipos de propiedad',
y = 'Precio (USD)')
dataset_sin_outliers %>%
select_if(is.numeric) %>%
ggcorr(method = c("complete.obs","pearson"),
low = '#e0f3db',
mid = '#a8ddb5',
high = '#43a2ca',
label = TRUE,
label_color = "black",
nbreaks = 5,
hjust = 0.75,
legend.position = "left") +
labs(title = "Propiedades en venta en CABA - Correlograma",
subtitle = "Valores atípicos eliminados")
data.model1 <- dataset_sin_outliers %>%
select(price, rooms)
mod1 <- lm(price ~ rooms, data = data.model1)
summary(mod1)
data.model2 <- dataset_sin_outliers %>%
select(price, surface_total)
mod2 <- lm(price ~ surface_total, data = data.model2)
summary(mod2)
library(tidyverse)
read_rds('ar_properties.rds)
library(tidyverse)
data = read_rds('ar_properties.rds)
data = read_rds('ar_properties.rds')
View(data)
properties = read_rds('ar_properties.rds')
model <- lm(y~., data=properties)
model <- lm(price~., data=properties)
model <- lm(price~., data=properties)
properties <- read_rds('ar_properties.rds')
model <- lm(price~., data=properties)
model <- lm(price ~ l3, data=properties)
model <- lm(price ~ c(l3,rooms), data=properties)
model <- lm(price ~ l3,rooms, data=properties)
model
model <- lm(price ~ l3, data=properties)
model
model <- lm(price ~ surface_total, data=properties)
model
model <- lm(price ~ l3+rooms+bathrooms, data=properties)
model
colnames(properties)
model <- lm(price ~ l3 + rooms + bathrooms + surface_total + surface_covered + property_types,
data=properties)
model <- lm(price ~ l3 + rooms + bathrooms + surface_total + surface_covered + property_type,
data=properties)
model
library(tidyverse)
coef(model)
order(coef(model))
sort(coef(model))
sort(coef(model), decreasing = TRUE)
summary(model)
abasto = -109406.61 + (-24788.27) + (1457.18*120) + (3*-3961.27) + (2*34040.98)
abasto
abasto = -109406.61 + (-24788.27) + (92653.32) + (1457.18*120) + (3*-3961.27) + (2*34040.98)
balvanera = -109406.61 + (-24788.27) + (46779.37) + (919.08*100) + (2*-3961.27) + (3*34040.98)
abasto
balvanera
abasto = -109406.61 + (-24788.27) + (92653.32) + (1457.18*120) + (3*-3961.27) + (2*34040.98) + (120*919.08)
balvanera = -109406.61 + (-24788.27) + (46779.37) + (919.08*100) + (2*-3961.27) + (3*34040.98) + (1457.18*80)
abasto
balvanera
propabasto = depto + l3balvanera + (120*mcubiertos) + (120*mtotales) + (3*dormitorios) + (2*banos)
propabasto = oo + depto + l3balvanera + (120*mcubiertos) + (120*mtotales) + (3*dormitorios) + (2*banos)
oo = -109406.61
l3balvanera = -24788.27
mcubiertos = 1457.18
mtotales = 919.08
dormitorios = -3961.27
banos = 34040.98
depto = 92653.32
ph = 46779.37
propabasto = oo + depto + l3balvanera + (120*mcubiertos) + (120*mtotales) + (3*dormitorios) + (2*banos)
propbalvanera = oo + ph + l3balvanera + (80*mcubiertos) + (100*mtotales) + (3*dormitorios) + (2*banos)
propabasto
propbalvanera
propabasto = oo + depto + l3balvanera # + (120*mcubiertos) + (120*mtotales) + (3*dormitorios) + (2*banos)
propbalvanera = oo + ph + l3balvanera #+ (80*mcubiertos) + (100*mtotales) + (3*dormitorios) + (2*banos)
oo + l3balvanera
oo + l3balvanera + ph
oo + l3balvanera + depto
propabasto = oo + depto + l3balvanera + (120*mcubiertos) + (120*mtotales) + (3*dormitorios) + (2*banos)
propbalvanera = oo + ph + l3balvanera + (80*mcubiertos) + (100*mtotales) + (2*dormitorios) + (3*banos)
propabasto
propbalvanera
model_sin_l3 <- lm(price ~ rooms + bathrooms + surface_total + surface_covered + property_type,
data=properties)
summary(model_sin_l3)
help("group_by")
group_by(price ~ l3, data=properties, mean)
properties %>%
select(l3, price) %>%
group_by(l3)
properties %>%
select(l3, price) %>%
group_by(l3) %>%
summarise(precio_promedio = mean(price))
properties %>%
select(l3, price) %>%
group_by(l3) %>%
summarise(media_precio = mean(price),
mediana_precio = median(price))
properties %>%
select(l3, price) %>%
group_by(l3) %>%
summarise(media_precio = mean(price),
mediana_precio = median(price)) %>%
order(media_precio, mediana_precio, decreasing = TRUE)
properties %>%
select(l3, price) %>%
group_by(l3) %>%
summarise(media_precio = mean(price),
mediana_precio = median(price)) %>%
order('media_precio', 'mediana_precio', decreasing = TRUE)
properties %>%
select(l3, price) %>%
group_by(l3) %>%
summarise(media_precio = mean(price),
mediana_precio = median(price)) %>%
order('mediana_precio', decreasing = TRUE)
properties %>%
select(l3, price) %>%
group_by(l3) %>%
summarise(media_precio = mean(price),
mediana_precio = median(price)) %>%
sort(mediana_precio, decreasing = TRUE)
properties %>%
select(l3, price) %>%
group_by(l3) %>%
summarise(media_precio = mean(price),
mediana_precio = median(price)) %>%
arrange(media_precio)
help(arrange)
properties %>%
arange(., precio, group_by(l3))
properties %>%
arrange(., precio, group_by(l3))
properties %>%
arrange(., price, group_by(l3))
properties %>%
arrange(., price, group_by=TRUE)
properties %>%
arrange(., price, group_by(l3))
properties %>%
select(l3, price) %>%
group_by(l3) %>%
summarise(media_precio = mean(price),
mediana_precio = median(price)) %>%
arrange(desc(media_precio), desc(media_precio))
precios <- properties %>%
select(l3, price) %>%
group_by(l3) %>%
summarise(media_precio = mean(price),
mediana_precio = median(price)) %>%
arrange(desc(media_precio), desc(media_precio))
precios
plot(sort(precios, decreasing = FALSE))
plot(sort(precios$media_precio, decreasing = FALSE))
plot(sort(precios$mediana_precio, decreasing = FALSE))
plot(sort(precios$media_precio, decreasing = FALSE))
boxplot(precios$media_precio)
ggplot(properties, aes(x = l3, y = price, group = l3, fill = l3)) +
geom_boxplot()+
scale_y_continuous(limits = c(0, 40000))
ggplot(properties, aes(x = l3, y = price, group = l3, fill = l3)) +
geom_boxplot()
ggplot(precios, aes(y = price, group = l3, fill = l3)) +
geom_boxplot()
ggplot(precios) +
geom_boxplot()
ggplot(precios) +
geom_boxplot()
ggplot(precios, aes(y = price)) +
geom_boxplot()
ggplot(precios, aes(y = media_precio)) +
geom_boxplot()
ggplot(precios, aes(y = media_precio)) +
ggplo(precios, aes(y = mediana_precio))
ggplot(precios, aes(y = media_precio)) +
ggplot(precios, aes(y = mediana_precio))
par(mfrow = c(1, 2))
ggplot(precios, aes(y = media_precio)) +
ggplot(precios, aes(y = mediana_precio))
par(mfrow = c(1, 2))
ggplot(precios, aes(y = media_precio)) +
geom_boxplot()
ggplot(precios, aes(y = media_precio)) +
geom_boxplot()
par(mfrow = c(1, 2))
ggplot(precios, aes(y = media_precio)) +
geom_boxplot()
ggplot(precios, aes(y = media_precio)) +
geom_boxplot()
par(mfrow = c(1, 2))
ggplot(precios, aes(y = media_precio)) +
geom_boxplot()
ggplot(precios, aes(y = mediana_precio)) +
geom_boxplot()
plot(sort(precios$media_precio, decreasing = FALSE))
plot(sort(precios$mediana_precio, decreasing = FALSE))
plot(sort(precios$media_precio, decreasing = FALSE))
precios <- properties %>%
precios
precios <- properties %>%
precios <- properties %>%
select(l3, price) %>%
group_by(l3) %>%
summarise(media_precio = mean(price)) %>%
arrange(desc(media_precio))
precios <- properties %>%
select(l3, price) %>%
group_by(l3) %>%
summarise(media_precio = mean(price))
precios
precios <- properties %>%
select(l3, price) %>%
group_by(l3) %>%
summarise(media_precio = mean(price)) %>%
arrange(desc(media_precio))
precios
plot(sort(precios$media_precio, decreasing = FALSE))
plot(sort(precios$media_precio, decreasing = TRUE),
title('Precios de barrios ordenados de por frecuecia'))
plot(sort(precios$media_precio, decreasing = TRUE))
plot(sort(properties$price, decreasing = FALSE))
plot(sort(properties$price, decreasing = FALSE)) +
xlab('Precios')
plot(sort(properties$price, decreasing = FALSE),
main  = 'Precios ordenados en forma creciente')
plot(sort(properties$price, decreasing = FALSE),
main  = 'Precios ordenados en forma creciente',
ylab = 'Precios',
xlab = 'Índice',
colors('blue'))
plot(sort(properties$price, decreasing = FALSE),
main  = 'Precios ordenados en forma creciente',
ylab = 'Precios',
xlab = 'Índice',
col = 'blue')
plot(sort(properties$price, decreasing = FALSE),
main  = 'Precios ordenados en forma creciente',
ylab = 'Precios',
xlab = 'Índice',
col = 'cyan4')
precios <- properties %>%
select(l3, price) %>%
group_by(l3) %>%
summarise(media_precio = mean(price)) %>%
arrange(desc(media_precio))
precios
plot(sort(precios$media_precio, decreasing = FALSE),
main  = 'Media de precios de barrios ordenadas en forma creciente',
ylab = 'Precios',
xlab = 'Índice',
col = 'cyan4')
boxplot(properties)
boxplot(properties$price)
plot(sort(precios$media_precio, decreasing = FALSE),
main  = 'Media de precios de barrios ordenadas en forma creciente',
ylab = 'Precios',
xlab = 'Índice',
col = 'cyan4')
plot(sort(precios$media_precio, decreasing = FALSE),
main  = 'Medias de precios de barrios ordenadas en forma creciente',
ylab = 'Precios',
xlab = 'Índice',
col = 'cyan4')
boxplot(precios$media_precio)
precios <- properties %>%
select(l3, price) %>%
group_by(l3) %>%
summarise(media_precio = mean(price),
mediana_precio = median(price)) %>%
arrange(desc(media_precio))
precios
data.riq<-IQR(properties$price)
print(data.riq)
cuantiles<-quantile(data, c(0.25, 0.5, 0.75), type = 7)
cuantiles<-quantile(properties, c(0.25, 0.5, 0.75), type = 7)
print(cuantiles)
cuantiles<-quantile(properties$price, c(0.25, 0.5, 0.75), type = 7)
print(cuantiles)
precios_min<-as.numeric(cuantiles[1])-1.5*data.riq
print(precios_min)
precios_min<-as.numeric(cuantiles[1])-1.5*data.riq
print(precios_min)
summary(properties$price)
plot(sort(properties$price, decreasing = FALSE),
main  = 'Precios ordenados en forma creciente',
ylab = 'Precios',
xlab = 'Índice',
col = 'cyan4')
summary(precios$media_precio)
properties %>%
select(l3, price) %>%
group_by(l3) %>%
mutate(pmedia = mean(.))
properties %>%
select(l3, price) %>%
group_by(l3) %>%
summarise(media_precio = mean(price))
precios <- properties %>%
select(l3, price) %>%
group_by(l3) %>%
summarise(media_precio = mean(price))
precios
precios <- properties %>%
select(l3, price) %>%
group_by(l3) %>%
summarise(mediana_precio = median(price))
precios
left_join(properties, precios, by=l3)
left_join(properties, precios, by='l3')
nueva_variable <- left_join(properties, precios, by='l3') %>%
mutate(barrios = case_when(mediana_precio < Q1 ~ "bajo",
mediana_precio > Q3 ~ "alto",
TRUE ~ "medio")) %>%
drop(mediana_precio)
Q1 = 120000
Q3 = 259000
nueva_variable <- left_join(properties, precios, by='l3') %>%
mutate(barrios = case_when(mediana_precio < Q1 ~ "bajo",
mediana_precio > Q3 ~ "alto",
TRUE ~ "medio")) %>%
drop(mediana_precio)
Q1 = 120000
Q3 = 259000
nueva_variable <- left_join(properties, precios, by='l3') %>%
mutate(barrios = case_when(mediana_precio < Q1 ~ "bajo",
mediana_precio > Q3 ~ "alto",
TRUE ~ "medio"))
nueva_variable
model_con_barrios <- lm(price ~ l3 + rooms + bathrooms + surface_total + surface_covered +
property_type + barrios ,data=properties)
properties_barrios <- left_join(properties, precios, by='l3') %>%
mutate(barrios = case_when(mediana_precio < Q1 ~ "bajo",
mediana_precio > Q3 ~ "alto",
TRUE ~ "medio"))
properties_barrios
model_con_barrios <- lm(price ~ l3 + rooms + bathrooms + surface_total + surface_covered +
property_type + barrios ,data=properties_barrios)
summary(model_con_barrios)
model_con_barrios <- lm(price ~ l3 + rooms + bathrooms + surface_total + surface_covered + property_type + barrios,
data=properties_barrios)
summary(model_con_barrios)
properties_barrios %>%
group_by(barrios)
properties_barrios %>%
group_by(barrios) %>%
summarise(n=sum(l3))
properties_barrios <- left_join(properties, precios, by='l3') %>%
mutate(barrios = case_when(mediana_precio < Q1 ~ bajo,
mediana_precio > Q3 ~ alto,
TRUE ~ medio))
properties_barrios <- left_join(properties, precios, by='l3') %>%
mutate(barrios = case_when(mediana_precio < Q1 ~ "bajo",
mediana_precio > Q3 ~ "alto",
TRUE ~ "medio"))
properties_barrios
summary(properties_barrios)
properties_barrios
model_con_barrios <- lm(price ~ l3 + rooms + bathrooms + surface_total + surface_covered + property_type + barrios,
data=properties_barrios)
summary(model_con_barrios)
summary(precios$mediana_precio)
Q1 = 129600
Q3 = 169000
properties_barrios <- left_join(properties, precios, by='l3') %>%
mutate(barrios = case_when(mediana_precio < Q1 ~ "bajo",
mediana_precio > Q3 ~ "alto",
TRUE ~ "medio"))
properties_barrios
model_con_barrios <- lm(price ~ l3 + rooms + bathrooms + surface_total + surface_covered + property_type + barrios,
data=properties_barrios)
property_type + barrios,
model_con_barrios <- lm(price ~ l3 + rooms + bathrooms + surface_total + surface_covered +
property_type + barrios, data=properties_barrios)
summary(model_con_barrios)
sum(is.na(properties_barrios$barrios))
properties_barrios
bin(properties$price, nbins = 3, labels = NULL, method = c("length"), na.omit = TRUE)
bin(properties$price, nbins = 3, labels = NULL, method = c("length"), na.omit = TRUE)
library('binr)
library('binr')
library('binr')
install.packages(binr)
install.packages('binr')
library('binr')
bin(properties$price, nbins = 3, labels = NULL, method = c("length"), na.omit = TRUE)
modelo <- lm(price ~ l3 + rooms + bathrooms + surface_total + surface_covered + property_type,
data=properties)
summary(modelo)
length(unique(properties$l3))
summary(modelo)
sort(coef(model))
sort(coef(model), decreasing = TRUE)
}
library(tidyverse)
options(na.action = na.warn)
options(na.action = na.warn)
library(tidyverse)
nuevos_casos <- data.frame(
l3 = c('Abasto', 'Balvanera'),
rooms = c(3, 2),
bathroos = c(2, 3),
surface_total = c(120, 100),
surface_covered = c(120, 80),
property_type = c('Departamento', 'PH')
)
nuevos_casos
predict(modelo, newdata = nuevos_casos)
nuevos_casos <- data.frame(
l3 = c('Abasto', 'Balvanera'),
rooms = c(3, 2),
bathrooms = c(2, 3),
surface_total = c(120, 100),
surface_covered = c(120, 80),
property_type = c('Departamento', 'PH')
)
nuevos_casos
predict(modelo, newdata = nuevos_casos)
help(predict)
nuevos_casos <- data.frame(
id = c(1, 2)
l3 = c('Abasto', 'Balvanera'),
nuevos_casos <- data.frame(
id = c(1, 2),
l3 = c('Abasto', 'Balvanera'),
rooms = c(3, 2),
bathrooms = c(2, 3),
surface_total = c(120, 100),
surface_covered = c(120, 80),
property_type = c('Departamento', 'PH')
)
nuevos_casos
predict(modelo, newdata = nuevos_casos)
nuevos_casos <- data.frame(
l3 = c('Abasto', 'Balvanera'),
rooms = c(3, 2),
bathrooms = c(2, 3),
surface_total = c(120, 100),
surface_covered = c(120, 80),
property_type = c('Departamento', 'PH')
)
nuevos_casos
predict(modelo, newdata = nuevos_casos)
m <- predict(modelo, newdata = nuevos_casos)
summary(m)
coef(m)
predict(modelo, newdata = nuevos_casos)
nuevos_casos %>%
predict(modelo)
nuevos_casos %>%
predict(modelo, newdata = .)
nuevos_casos %>%
mutatw(predict = predict(modelo, newdata = .))
nuevos_casos %>%
mutate(predict = predict(modelo, newdata = .))
nuevos_casos %>%
mutate(predict = predict(modelo, newdata = .)) %>%
select(l3, everything())
nuevos_casos %>%
mutate(predict = predict(modelo, newdata = .)) %>%
select(l3, predict, everything())
modelo_l3 <- lm(price ~ rooms + bathrooms + surface_total + surface_covered + property_type,
data=properties)
summary(modelo_l3)
